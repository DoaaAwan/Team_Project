<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emma's Small Engines</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/44b9581dbb.js" crossorigin="anonymous"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="../src/jquery-3.7.1.min.js"></script>
    <!--<script async src="../scripts/import-nav.js"></script>-->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
    </style>
    <link rel="stylesheet" href="../src/style.css">
    <link rel="stylesheet" href="../styles/customer-details.css">
    <!-- <link rel="stylesheet" href="../styles/help-button.css"> -->
</head>
<body>
    <div class="app-container">
        <nav>
            <div class="main-nav">
                <a href="../index.html">
                    <img src="../images/logo-text.png" alt="Emma's Small Engines Logo" class="img-fluid logo-text">
                </a>
                <a data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
                    <img src="../images/hamburger-menu.png" alt="" class="nav-icon">
                </a>
            </div>
            <div>
                <div class="offcanvas offcanvas-end sidebar" tabindex="-1" id="offcanvasExample"
                    aria-labelledby="offcanvasExampleLabel">
                    <div class="offcanvas-header pb-0 ps-0 pe-0">
                        <div class="offcanvas-title" id="offcanvasExampleLabel"></div>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <div class="container">
                            <div class="d-flex justify-content-center">
                                <div class="nav-user-img" >
                                    <div><img src="../images/user-profile.png" id="navUserImg" class="" alt=""></div>
                                </div>
                                <div class="ms-3">
                                    <div class="nav-user-info">
                                        <p class="nm" id="navUserName">Amy Johnson</p>
                                        <p class="dpt" id="navUserRole"><small>Sales Department</small></p>
                                        <a href="../pages/login.html" class="primary-btn" id="sign-out-btn">Sign Out</a>
                                    </div>
                                </div>
                            </div>
                            <div class="nav-buttons">
                                <a href="../index.html" data-roles="all" id="backToHome">
                                    <div class="nav-btn bg-grp1">
                                        <span class="nav-btn-txt">Back to Home</span>
                                        <span class="nav-btn-icon">
                                            <ion-icon name="home-outline"></ion-icon>
                                        </span>
                                    </div>
                                </a>
                                <a href="../index.html" data-roles="salesRep admin technician">
                                    <div class="nav-btn bg-grp2" >
                                        <span class="nav-btn-txt">Search Customer
                                        </span>
                                        <span class="nav-btn-icon">
                                            <ion-icon name="search-outline"></ion-icon>
                                        </span>
                                    </div>
                                </a>
                                <a href="../pages/customer-create.html" data-roles="salesRep admin">
                                    <div class="nav-btn bg-grp3">
                                        <span class="nav-btn-txt">Create Customer</span>
                                        <span class="nav-btn-icon">
                                            <ion-icon name="person-add-outline"></ion-icon>
                                        </span>
                                    </div>
                                </a>
                                <a href="../pages/active-repairs.html" data-roles="technician admin">
                                    <div class="nav-btn bg-grp4">
                                        <span class="nav-btn-txt">Active Repairs</span>
                                        <span class="nav-btn-icon">
                                            <ion-icon name="alert-circle-outline"></ion-icon>
                                        </span>
                                    </div>
                                </a>
                                <a href="../pages/completed-repairs.html" data-roles="salesRep admin">
                                    <div class="nav-btn bg-grp4">
                                        <span class="nav-btn-txt">Completed Repairs</span>
                                        <span class="nav-btn-icon">
                                            <ion-icon name="checkmark-circle-outline"></ion-icon>
                                        </span>
                                    </div>
                                </a>
                                <a href="../pages/reports-home.html" data-roles="admin">
                                    <div class="nav-btn bg-grp4">
                                        <span class="nav-btn-txt">Reports</span>
                                        <span class="nav-btn-icon">
                                            <ion-icon name="reader-outline"></ion-icon>
                                        </span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <section class="page-container">
            <header>
                <div class="d-flex justify-content-between">
                    <div>
                        <h1>Customer Details</h1>
                    </div>
                    <div>
                        <a href="../index.html" class="button secondary-btn">
                            Back to Customer Search
                            <ion-icon name="arrow-back-circle-outline"></ion-icon>
                        </a>
                    </div>
                </div>
            </header>

            <div class="page">
                <div class="customer-details" id="customer-details">
                    <h2 id="customer-name" style="display: none;">Customer's Name</h2>
                    <hr>
                    <div class="customer-details-grid">
                        <div class="column">
                            <p id="customer-email"></p>
                            <p id="customer-phone"></p>
                            <p id="customer-street"></p>
                            <p id="customer-city"></p>
                            <p id="customer-province"></p>
                            <p id="customer-postal"></p>
                            <div class="d-flex">
                                <button id="update-customer-btn" class="button btns" data-bs-toggle="modal" data-bs-target="#customerDetailsModal">Update Customer</button>
                            </div>
                        </div>
                        <div class="customer-lists-grid">
                            <div>
                                <h2 id="customer-name-equip" style="display: none;">Customer's Equipments</h2>
                                <select name="Orders" class="form-select" id="equipment-list" size="5">   
                                </select>
                                <div class="d-flex">
                                    <!-- <a href="../pages/equipment-search.html" id="add-equipment-btn" class="button btns">Add Equipment</a> -->
                                    <button class="button btns" id="add-equipment-btn" data-bs-toggle="modal" data-bs-target="#equipmentDetailsModal">Add Equipment</button>
                                    <button disabled id="details-equipment-btn" style="background-color: grey;" class="button btns" data-bs-toggle="modal" data-bs-target="#equipmentDetailsModal">Equipment Details</button>
                                </div>
                            </div>
                            <div id="repair-requests">
                                <div class="what">
                                    <div class="container">
                                        <ul class="nav nav-tabs">
                                          <li class="nav-item">
                                            <button disabled class="nav-link active" id="all-repairs-btn">All Repairs</button>
                                          </li>
                                          <li class="nav-item">
                                            <button disabled class="nav-link" id="active-repairs-btn">Active Repairs</button>
                                          </li>
                                          <li class="nav-item">
                                            <button disabled class="nav-link" id="completed-repairs-btn">Completed Repairs</button>
                                          </li>
                                        </ul>
                                    </div>
                                    <select name="Orders" disabled class="form-select" id="repair-requests-list" size="5">   
                                    </select>
                                </div>
                                <div class="d-flex">
                                    <button disabled id="create-repair-request" class="button btns" style="background-color: grey;" data-bs-toggle="modal" data-bs-target="#repairRequestDetailsModal">Create Repair Request</button>
                                    <button disabled id="details-repair-request" class="button btns" style="background-color: grey;" data-bs-toggle="modal" data-bs-target="#repairRequestDetailsModal">Repair Request Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <div class="modal fade" id="customerDetailsModal" tabindex="-1" aria-labelledby="customerModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title fs-5" id="customerModalLabel">Update Customer</h2>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <form method="post" action="https://webdevbasics.net/scripts/demo.php" id="customer-form">
                    <fieldset class="modal-body">
                        <div class="customer-field">
                            <label for="modal-first-name">First Name:</label>
                            <input type="text" placeholder="E.g. John" id="modal-first-name" name="modal-first-name" required>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-last-name">Last Name</label>
                            <input type="text" placeholder="E.g. Smith" id="modal-last-name" name="modal-last-name" required>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-email">Email</label>
                            <input id="modal-email" name="modal-email" type="email" placeholder="E.g. johnsmith@gmail.com" required>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-phone">Phone Number</label>
                            <input type="tel" placeholder="E.g. (123) 456 - 7890" id="modal-phone" name="modal-phone" required>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-address">Address</label>
                            <input type="text" placeholder="E.g. 22 Full Moon Crescent" id="modal-address" name="modal-address" required>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-city">City</label>
                            <select name="modal-city" id="modal-city" required>
                                <option value="">Select a City</option>
                                <option value="Brampton">Brampton</option>
                                <option value="Fonthill">Fonthill</option>
                                <option value="Hamilton">Hamilton</option>
                                <option value="Kitchener">Kitchener</option>
                                <option value="London">London</option>
                                <option value="Markham">Markham</option>
                                <option value="Mississauga">Mississauga</option>
                                <option value="Niagara Falls">Niagara Falls</option>
                                <option value="Oshawa">Oshawa</option>
                                <option value="St. Catharines">St.Catharines</option>
                                <option value="Thorold">Thorold</option>
                                <option value="Toronto">Toronto</option>
                                <option value="Waterloo">Waterloo</option>
                                <option value="Welland">Welland</option>
                            </select>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-province">Province</label>
                            <select name="modal-province" id="modal-province" required>
                                <option value="">Select a Province</option>
                                <option value="Alberta">Alberta</option>
                                <option value="British Columbia">British Columbia</option>
                                <option value="Manitoba">Manitoba</option>
                                <option value="New Brunswick">New Brunswick</option>
                                <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                <option value="Northwest Territories">Northwest Territories</option>
                                <option value="Nova Scotia">Nova Scotia</option>
                                <option value="Nunavut">Nunavut</option>
                                <option value="Ontario">Ontario</option>
                                <option value="Prince Edward Island">Prince Edward Island</option>
                                <option value="Quebec">Quebec</option>
                                <option value="Saskatchewan">Saskatchewan</option>
                            </select>
                        </div>
                        <hr>
                        <div class="customer-field">
                            <label for="modal-postal">Postal Code</label>
                            <input id="modal-postal" name="modal-postal" type="text" placeholder="E.g. L3C 0A8" pattern="[A-Za-z][0-9][A-Za-z] [0-9][A-Za-z][0-9]" required>
                        </div>
                    </fieldset>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="close-customer-modal">Close</button>
                    <button id="update-customer-modal-btn" class="button btns">Save</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="equipmentDetailsModal" tabindex="-1" aria-labelledby="equipmentModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title fs-5" id="equipmentModalLabel">Create Equipment</h2>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <form method="post" action="https://webdevbasics.net/scripts/demo.php" id="equipment-form">
                    <fieldset class="modal-body">
                        <div class="equipment-field">
                            <label for="equipment-name">Name:</label>
                            <input type="text" placeholder="E.g. TurfTamer Supreme" id="equipment-name" name="equipment-name" required disabled>
                        </div>
                        <hr>
                        <div class="equipment-field">
                            <label for="equipment-manufacturer">Manufacturer:</label>
                            <select name="equipment-manufacturer" id="equipment-manufacturer" required disabled>
                                <option value="" selected disabled>Select Manufacturer</option>
                                <option value="Craftsman">
                                    Craftsman
                                </option>
                                <option value="Pro-Power Canada">
                                    Pro-Power Canada
                                </option>
                                <option value="Troy-Bilt">
                                    Troy-Bilt
                                </option>
                                <option value="Toro">
                                    Toro
                                </option>
                                <option value="SnowMaster">
                                    SnowMaster
                                </option>
                                <option value="HedgeMaster">
                                    HedgeMaster
                                </option>
                            </select>
                        </div>
                        <hr>
                        <div class="equipment-field">
                            <label for="equipment-type">Equipment Type:</label>
                            <select id="equipment-type" name="equipment-type" required disabled>
                                <option value="" disabled selected>Select Equipment Type</option>
                                <option value="Lawn Mower">
                                    Lawn Mower
                                </option>
                                <option value="Leaf Blower">
                                    Leaf Blower
                                </option>
                                <option value="Chainsaw">
                                    Chainsaw
                                </option>
                                <option value="Hedge Trimmer">
                                    Hedge Trimmer
                                </option>
                                <option value="Snow Blower">
                                    Snow Blower
                                </option>
                                <option value="Pressure Washer">
                                    Pressure Washer
                                </option>
                            </select>
                        </div>
                        <hr>
                        <div class="equipment-field">
                            <label for="equipment-colour">Name:</label>
                            <select id="equipment-colour" name="equipment-colour" required disabled>
                                <option value="" disabled selected>Select Colour</option>
                                <option value="Red">
                                    Red
                                </option>
                                <option value="Green">
                                    Green
                                </option>
                                <option value="Blue">
                                    Blue
                                </option>
                                <option value="Yellow">
                                    Yellow
                                </option>
                                <option value="White">
                                    White
                                </option>
                                <option value="Silver">
                                    Silver
                                </option>
                                <option value="Black">
                                    Black
                                </option>
                            </select>
                        </div>
                        <hr>
                        <div class="equipment-field">
                            <label for="equipment-model">M/N(Model Number):</label>
                            <input type="text" placeholder="E.g. C03S" id="equipment-model" name="equipment-model" required disabled>
                        </div>
                        <hr>
                        <div class="equipment-field">
                            <label for="equipment-serial">S/N(Serial Number):</label>
                            <input type="text" placeholder="E.g. 12345678" id="equipment-serial" name="equipment-serial" required disabled>
                        </div>
                    </fieldset>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="close-equipment-modal">Close</button>
                    <button id="update-equipment-btn" class="button btns">Update Equipment</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="repairRequestDetailsModal" tabindex="-1" aria-labelledby="repairRequestModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title fs-5" id="repairRequestModalLabel">Create Repair Request</h2>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <form method="post" action="https://webdevbasics.net/scripts/demo.php" id="repair-request-form">
                    <fieldset class="modal-body">
                        <div class="repair-field">
                            <p>Invoice Date:</p>
                            <p id="invoice-date"></p>
                        </div>
                        <hr>
                        <div class="repair-field">
                            <p>Invoice Number:</p>
                            <p id="invoice-number"></p>
                        </div>
                        <hr>
                        <div class="repair-field">
                            <label for="issue-description">Issue Description:</label>
                            <textarea id="issue-description" name="issue-description"  class="form-control" required></textarea>
                        </div>
                        <hr>
                        <div class="repair-field">
                            <label for="valid-warranty">Valid Warranty?</label>
                            <div><input id="valid-warranty" name="valid-warranty" type="checkbox" class="form-check-input" style="text-align: left;"></div>
                        </div>
                    </fieldset>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="close-repair-request-modal" data-bs-dismiss="modal">Close</button>
                    <button class="button btns" id="update-repair-request-btn">Update Repair Request</button>
                </div>
            </div>
        </div>
    </div>

    

    <script src="../scripts/role-based-nav.js"></script>
    <script src="../scripts/customer-details.js"></script>
    <script src="../scripts/help-tooltip.js"></script>
    <script src="../scripts/update-nav.js"></script>
    <!--
    <script>
        //passing data to the repairs page
        document.getElementById("create-repair-request").addEventListener("click", function (e) {
            e.preventDefault();
            const customerName = document.getElementById("customer-name").textContent;
            const equipmentList = document.getElementById("equipment-list");

            const chosenEquipmentId = equipmentList.options[equipmentList.selectedIndex].textContent;

            const createRepairRequestURL = `../pages/repair-request-create.html?customerName=${encodeURIComponent(customerName)}&chosenEquipment=${encodeURIComponent(chosenEquipmentId)}`;
            
            console.log(customerName);
            console.log(chosenEquipmentId);
            // Navigate to the new page with query parameters
            window.location.href = createRepairRequestURL;


        });
    </script>
    -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const backToHomeLink = document.getElementById('backToHome');
        if (backToHomeLink) {
            backToHomeLink.addEventListener('click', function(event) {
            const selectedRole = localStorage.getItem('selectedRole') || 'default';
                if (selectedRole === 'technician') {
                    event.preventDefault();
                    window.location.href = '../pages/active-repairs.html'; 
                }
                if (selectedRole === 'admin') {
                        event.preventDefault();
                        window.location.href = '../pages/reports-home.html';
                }
            });
        }
        });
    </script>
    
</body>
</html>